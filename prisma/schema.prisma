generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

/// =========================
///    Core & Auth
///    =========================
model admin_users {
  id                    String                   @id @default(uuid()) @db.VarChar(36)

  // ── Profil & Auth
  profile_photo         String?                  @db.VarChar(512)
  email                 String                   @unique(map: "email") @db.VarChar(191)
  no_whatsapp           String?                  @db.VarChar(32) @map("no_whatsapp")
  password              String                   @db.VarChar(255)
  name                  String?                  @db.VarChar(191)

  // ── Timestamps
  created_at            DateTime                 @default(now()) @db.DateTime(6)
  updated_at            DateTime                 @updatedAt @db.DateTime(6)
  deleted_at            DateTime?                @db.DateTime(6)
  password_changed_at   DateTime                 @default(now()) @db.DateTime(6)

  // ── Relations (pastikan model lain punya FK ke admin_users.id)
  aktivitas             aktivitas[]
  blog                  blog[]
  college               college[]
  events                events[]
  mitra_dalam_negeri    mitra_dalam_negeri[]
  mitra_reviews         mitra_dalam_negeri[]     @relation("mitra_reviewer")
  reset_password_tokens reset_password_tokens[]
  services              services[]
  testimonials          testimonials[]
  checkin_logs          ticket_checkin_logs[]

  @@map("admin_users")
}


model reset_password_tokens {
  id            String      @id @default(uuid()) @db.VarChar(36)
  token         String      @unique(map: "uq_reset_password_tokens_token") @db.VarChar(128)
  expires_at    DateTime    @db.DateTime(6)
  used_at       DateTime?   @db.DateTime(6)
  created_at    DateTime    @default(now()) @db.DateTime(6)
  admin_user_id String      @db.VarChar(36)
  admin_users   admin_users @relation(fields: [admin_user_id], references: [id], map: "fk_reset_password_tokens_admin")

  @@index([admin_user_id], map: "idx_reset_tokens_admin")
  @@index([expires_at], map: "idx_reset_tokens_expires")
  @@map("reset_password_tokens")
}

/// =========================
///    Blog
///    =========================
model blog {
  id             String           @id @default(uuid()) @db.VarChar(36)
  admin_user_id  String           @db.VarChar(36)
  image_url      String           @db.VarChar(255)
  views_count    BigInt           @default(0) @db.UnsignedBigInt
  likes_count    BigInt           @default(0) @db.UnsignedBigInt
  created_at     DateTime         @default(now()) @db.DateTime(6)
  updated_at     DateTime         @default(now()) @db.DateTime(6)
  deleted_at     DateTime?        @db.DateTime(6)
  category_id    String?          @db.VarChar(36)
  admin_users    admin_users      @relation(fields: [admin_user_id], references: [id], map: "fk_blog_admin_users")
  category       blog_categories? @relation(fields: [category_id], references: [id], map: "fk_blog_category")
  blog_translate blog_translate[]

  @@index([admin_user_id], map: "idx_blog_admin_user")
  @@index([created_at], map: "idx_blog_created_at")
  @@index([deleted_at], map: "idx_blog_deleted_at")
  @@index([category_id], map: "idx_blog_category")
}

model blog_translate {
  id          String   @id @default(uuid()) @db.VarChar(36)
  id_blog     String   @db.VarChar(36)
  locale      String   @db.Char(5)
  name        String
  description String?  @db.LongText
  created_at  DateTime @default(now()) @db.DateTime(6)
  updated_at  DateTime @default(now()) @db.DateTime(6)
  blog        blog     @relation(fields: [id_blog], references: [id], onDelete: Cascade, map: "fk_blogtr_blog")

  @@unique([id_blog, locale], map: "uniq_blog_locale")
  @@index([locale], map: "idx_blogtr_locale")
}

model blog_categories {
  id         String                      @id @default(uuid()) @db.VarChar(36)
  slug       String                      @unique @db.VarChar(100)
  sort       Int                         @default(0) @db.UnsignedInt
  created_at DateTime                    @default(now()) @db.DateTime(6)
  updated_at DateTime                    @updatedAt @db.DateTime(6)
  deleted_at DateTime?                   @db.DateTime(6)
  blog       blog[]
  translate  blog_categories_translate[]

  @@index([deleted_at], map: "idx_blogcat_deleted")
  @@index([sort], map: "idx_blogcat_sort")
  @@map("blog_categories")
}

model blog_categories_translate {
  id          String          @id @default(uuid()) @db.VarChar(36)
  category_id String          @db.VarChar(36)
  locale      String          @db.Char(5)
  name        String
  description String?         @db.Text
  created_at  DateTime?       @default(now()) @db.DateTime(6)
  updated_at  DateTime?       @default(now()) @db.DateTime(6)
  category    blog_categories @relation(fields: [category_id], references: [id], onDelete: Cascade, map: "fk_blogcat_tr_category")

  @@unique([category_id, locale], map: "uniq_blogcat_locale")
  @@index([locale], map: "idx_blogcat_locale")
  @@map("blog_categories_translate")
}

/// =========================
///    Testimonials
///    =========================
model testimonials {
  id                     String                   @id @default(uuid()) @db.VarChar(36)
  admin_user_id          String                   @db.VarChar(36)
  photo_url              String                   @db.VarChar(255)
  youtube_url            String?                  @db.VarChar(255)
  kampus_negara_tujuan   String?                  @db.VarChar(255)
  created_at             DateTime                 @default(now()) @db.DateTime(6)
  updated_at             DateTime                 @updatedAt @db.DateTime(6)
  deleted_at             DateTime?                @db.DateTime(6)
  star                   Int                      @default(5) @db.UnsignedTinyInt
  category_id            String?                  @db.VarChar(36)
  admin_user             admin_users              @relation(fields: [admin_user_id], references: [id])
  testimonials_translate testimonials_translate[]

  @@index([admin_user_id], map: "idx_testimonials_admin")
  @@index([category_id], map: "idx_testimonials_category")
  @@map("testimonials")
}

model testimonials_translate {
  id              String       @id @default(uuid()) @db.VarChar(36)
  id_testimonials String       @db.VarChar(36)
  locale          String       @db.Char(5)
  name            String
  message         String?      @db.Text
  created_at      DateTime?    @default(now()) @db.DateTime(6)
  updated_at      DateTime?    @default(now()) @db.DateTime(6)
  testimonials    testimonials @relation(fields: [id_testimonials], references: [id], onDelete: Cascade, map: "fk_testimonials_translate_testimonials")

  @@unique([id_testimonials, locale], map: "uniq_testimonials_locale")
  @@index([locale], map: "idx_locale")
}

model testimonial_categories {
  id         String   @id @default(uuid()) @db.VarChar(36)
  slug       String   @unique @db.VarChar(100)
  created_at DateTime @default(now()) @db.DateTime(6)
  updated_at DateTime @updatedAt @db.DateTime(6)

  @@map("testimonial_categories")
}

model testimonial_categories_translate {
  id          String @id @default(uuid()) @db.VarChar(36)
  category_id String @db.VarChar(36)
  locale      String @db.Char(5)
  name        String

  @@unique([category_id, locale], map: "uniq_testimonial_category_locale")
  @@index([locale], map: "idx_testimonial_category_locale")
  @@map("testimonial_categories_translate")
}

/// ---- NEW: Event Categories ----
model event_categories {
  id         String                       @id @default(uuid()) @db.VarChar(36)
  slug       String                       @unique @db.VarChar(100)
  sort       Int                          @default(0) @db.UnsignedInt
  created_at DateTime                     @default(now()) @db.DateTime(6)
  updated_at DateTime                     @updatedAt @db.DateTime(6)
  deleted_at DateTime?                    @db.DateTime(6)
  translate  event_categories_translate[]
  events     events[]

  @@index([deleted_at], map: "idx_eventcat_deleted")
  @@index([sort], map: "idx_eventcat_sort")
  @@map("event_categories")
}

model event_categories_translate {
  id          String           @id @default(uuid()) @db.VarChar(36)
  category_id String           @db.VarChar(36)
  locale      String           @db.Char(5)
  name        String
  description String?          @db.Text
  created_at  DateTime?        @default(now()) @db.DateTime(6)
  updated_at  DateTime?        @default(now()) @db.DateTime(6)
  category    event_categories @relation(fields: [category_id], references: [id], onDelete: Cascade, map: "fk_eventcat_tr_category")

  @@unique([category_id, locale], map: "uniq_eventcat_locale")
  @@index([locale], map: "idx_eventcat_locale")
  @@map("event_categories_translate")
}

/// ---- Events ----
model events {
  id               String                 @id @default(uuid()) @db.VarChar(36)
  admin_user_id    String                 @db.VarChar(36)
  start_at         DateTime               @db.DateTime(6)
  end_at           DateTime               @db.DateTime(6)
  location         String                 @db.VarChar(255)
  banner_url       String                 @db.VarChar(512)
  is_published     Boolean                @default(false)
  capacity         Int?
  created_at       DateTime               @default(now()) @db.DateTime(6)
  updated_at       DateTime               @updatedAt @db.DateTime(6)
  deleted_at       DateTime?              @db.DateTime(6)
  pricing_type     events_pricing_type    @default(FREE)
  ticket_price     Int                    @default(0)
  category_id      String?                @db.VarChar(36)
  booth_price      Int                    @default(0)
  booth_quota      Int?                   @db.UnsignedInt
  booth_sold_count Int                    @default(0) @db.UnsignedInt
  booth_bookings   event_booth_bookings[]
  admin_users      admin_users            @relation(fields: [admin_user_id], references: [id], map: "fk_events_admin")
  category         event_categories?      @relation(fields: [category_id], references: [id], map: "fk_events_category")
  events_translate events_translate[]
  tickets          tickets[]
  vouchers         vouchers[]

  @@index([admin_user_id], map: "idx_events_admin")
  @@index([start_at, end_at], map: "idx_events_dates")
  @@index([is_published, start_at], map: "idx_events_published_start")
  @@index([category_id], map: "idx_events_category")
  @@map("events")
}

model events_translate {
  id          String    @id @default(uuid()) @db.VarChar(36)
  id_events   String    @db.VarChar(36)
  locale      String    @db.Char(5)
  title       String
  description String?   @db.LongText
  created_at  DateTime? @default(now()) @db.DateTime(6)
  updated_at  DateTime? @default(now()) @db.DateTime(6)
  events      events    @relation(fields: [id_events], references: [id], onDelete: Cascade, map: "fk_events_translate_events")

  @@unique([id_events, locale], map: "uniq_events_locale")
  @@index([locale], map: "idx_locale")
}

model tickets {
  id                String                 @id @default(uuid()) @db.VarChar(36)
  event_id          String                 @db.VarChar(36)
  full_name         String
  email             String
  whatsapp          String?                @db.VarChar(64)
  school_or_campus  String?
  class_or_semester String?
  domicile          String?
  ticket_code       String                 @unique(map: "uq_tickets_ticket_code") @db.VarChar(64)
  qr_url            String?                @db.VarChar(512)
  status            tickets_status         @default(PENDING)
  total_price       Int                    @default(0)
  payment_method    String?                @db.VarChar(64)
  payment_reference String?                @db.VarChar(128)
  paid_at           DateTime?              @db.DateTime(6)
  expires_at        DateTime?              @db.DateTime(6)
  checkin_status    tickets_checkin_status @default(NOT_CHECKED_IN)
  checked_in_at     DateTime?              @db.DateTime(6)
  created_at        DateTime               @default(now()) @db.DateTime(6)
  updated_at        DateTime               @updatedAt @db.DateTime(6)
  deleted_at        DateTime?              @db.DateTime(6)
  checkin_logs      ticket_checkin_logs[]
  events            events                 @relation(fields: [event_id], references: [id], map: "fk_tickets_event")

  @@unique([event_id, email], map: "uq_tickets_event_email")
  @@index([checkin_status], map: "idx_tickets_checkin")
  @@index([email], map: "idx_tickets_email")
  @@index([event_id], map: "idx_tickets_event")
  @@index([status], map: "idx_tickets_status")
  @@index([checked_in_at], map: "idx_tickets_checked_in_at")
  @@map("tickets")
}

model ticket_checkin_logs {
  id          String      @id @default(uuid()) @db.VarChar(36)
  ticket_id   String      @db.VarChar(36)
  admin_id    String      @db.VarChar(36)
  created_at  DateTime    @default(now()) @db.DateTime(6)
  admin_users admin_users @relation(fields: [admin_id], references: [id], map: "fk_checkin_admin")
  tickets     tickets     @relation(fields: [ticket_id], references: [id], map: "fk_checkin_ticket")

  @@index([ticket_id])
  @@index([admin_id])
  @@index([created_at])
  @@map("ticket_checkin_logs")
}

model event_booth_bookings {
  id           String               @id @default(uuid()) @db.VarChar(36)
  event_id     String               @db.VarChar(36)
  order_id     String?              @unique
  rep_name     String
  country      String
  campus_name  String
  address      String
  whatsapp     String               @db.VarChar(32)
  email        String?              @db.VarChar(150)
  voucher_code String?              @db.VarChar(64)
  amount       Int
  status       booth_booking_status @default(PENDING)
  paid_at      DateTime?            @db.DateTime(6)
  created_at   DateTime             @default(now()) @db.DateTime(6)
  updated_at   DateTime             @updatedAt @db.DateTime(6)
  event        events               @relation(fields: [event_id], references: [id], map: "fk_boothbooking_event")
  payments     payments[]

  @@index([event_id], map: "idx_boothbooking_event")
  @@index([status], map: "idx_boothbooking_status")
  @@map("event_booth_bookings")
}

model payments {
  id           String                @id @default(uuid()) @db.VarChar(36)
  booking_id   String?               @db.VarChar(36)
  order_id     String                @unique @db.VarChar(100)
  channel      String?               @db.VarChar(64)
  status       String                @db.VarChar(32)
  gross_amount Int
  raw          Json
  created_at   DateTime              @default(now()) @db.DateTime(6)
  updated_at   DateTime              @updatedAt @db.DateTime(6)
  booking      event_booth_bookings? @relation(fields: [booking_id], references: [id], map: "fk_payments_booking")

  @@index([booking_id], map: "idx_payments_booking")
  @@index([status], map: "idx_payments_status")
  @@map("payments")
}

/// =========================
///    NEW: Vouchers (Fixed IDR)
///    =========================
model vouchers {
  id           String       @id @default(uuid()) @db.VarChar(36)
  code         String       @unique @db.VarChar(64)
  value        Int
  is_active    Boolean      @default(true)
  max_uses     Int?         @db.UnsignedInt
  used_count   Int          @default(0) @db.UnsignedInt
  valid_from   DateTime?    @db.DateTime(6)
  valid_to     DateTime?    @db.DateTime(6)
  event_id     String?      @db.VarChar(36)
  created_at   DateTime     @default(now()) @db.DateTime(6)
  updated_at   DateTime     @updatedAt @db.DateTime(6)
  max_discount Int?         @db.UnsignedInt
  type         voucher_type @default(FIXED)
  event        events?      @relation(fields: [event_id], references: [id], map: "fk_voucher_event")

  @@index([event_id], map: "idx_vouchers_event")
  @@index([is_active], map: "idx_vouchers_active")
  @@map("vouchers")
}

/// =========================
///    Analytics
///    =========================
model analytics_pageviews {
  id         String   @id @default(uuid()) @db.VarChar(36)
  path       String   @db.VarChar(255)
  referrer   String?  @db.VarChar(255)
  user_agent String?  @db.VarChar(255)
  visitor_id String   @db.VarChar(64)
  session_id String   @db.VarChar(64)
  created_at DateTime @default(now()) @db.DateTime(6)

  @@index([created_at])
  @@index([visitor_id])
  @@index([session_id])
  @@index([path])
  @@map("analytics_pageviews")
}

/// =========================
///    Jurusan & Prodi
///    =========================
model jurusan {
  id                String              @id @default(uuid()) @db.VarChar(36)
  college_id        String              @db.VarChar(36)
  created_at        DateTime            @default(now()) @db.DateTime(0)
  updated_at        DateTime            @default(now()) @db.DateTime(0)
  deleted_at        DateTime?           @db.DateTime(0)
  college           college             @relation(fields: [college_id], references: [id], map: "fk_jurusan_college")
  jurusan_translate jurusan_translate[]

  @@index([deleted_at], map: "idx_jurusan_deleted")
  @@index([college_id], map: "idx_jurusan_college")
  @@map("jurusan")
}

model jurusan_translate {
  id          String   @id @default(uuid()) @db.VarChar(36)
  id_jurusan  String   @db.VarChar(36)
  locale      String   @db.VarChar(5)
  name        String
  description String?  @db.LongText
  created_at  DateTime @default(now()) @db.DateTime(0)
  updated_at  DateTime @default(now()) @db.DateTime(0)
  jurusan     jurusan  @relation(fields: [id_jurusan], references: [id], onDelete: Cascade, map: "fk_jurusan_translate_jurusan")

  @@unique([id_jurusan, locale], map: "jurusan_locale_unique")
  @@index([locale], map: "idx_jurusan_translate_locale")
  @@map("jurusan_translate")
}

model prodi {
  id              String            @id @default(uuid()) @db.VarChar(36)
  jurusan_id      String?           @db.VarChar(36)
  created_at      DateTime          @default(now()) @db.DateTime(0)
  updated_at      DateTime          @default(now()) @db.DateTime(0)
  deleted_at      DateTime?         @db.DateTime(0)
  college_id      String?           @db.VarChar(36)
  prodi_translate prodi_translate[]

  @@index([deleted_at], map: "idx_prodi_deleted")
  @@index([jurusan_id], map: "idx_prodi_jurusan")
}

model prodi_translate {
  id          String   @id @default(uuid()) @db.VarChar(36)
  id_prodi    String   @db.VarChar(36)
  locale      String   @db.VarChar(5)
  name        String
  description String?  @db.LongText
  created_at  DateTime @default(now()) @db.DateTime(0)
  updated_at  DateTime @default(now()) @db.DateTime(0)
  prodi       prodi    @relation(fields: [id_prodi], references: [id], onDelete: Cascade, map: "fk_prodi_translate_prodi")

  @@unique([id_prodi, locale], map: "prodi_locale_unique")
  @@index([locale], map: "idx_jurusan_translate_locale")
}

/// =========================
///    Consultants & Leads
///    =========================
model consultants {
  id                           String                      @id @default(uuid()) @db.VarChar(36)
  whatsapp                     String?                     @unique(map: "uq_consultants_whatsapp") @db.VarChar(30)
  email                        String?                     @unique(map: "uq_consultants_email")
  profile_image_url            String?                     @db.VarChar(512)
  created_at                   DateTime                    @default(now()) @db.Timestamp(0)
  updated_at                   DateTime                    @default(now()) @db.Timestamp(0)
  program_images               consultant_program_images[]
  consultants_translate        consultants_translate[]
  leads                        leads[]
  referrals                    referral[]

  @@index([email], map: "idx_consultants_email")
  @@index([whatsapp], map: "idx_consultants_whatsapp")
}

model consultants_translate {
  id            String      @id @default(uuid()) @db.VarChar(36)
  id_consultant String      @db.VarChar(36)
  locale        String      @db.VarChar(5)
  name          String      @db.VarChar(150)
  description   String?     @db.LongText
  created_at    DateTime    @default(now()) @db.Timestamp(0)
  updated_at    DateTime    @default(now()) @db.Timestamp(0)
  consultants   consultants @relation(fields: [id_consultant], references: [id], onDelete: Cascade, map: "fk_ct_consultant")

  @@unique([id_consultant, locale], map: "uniq_ct_consultant_locale")
  @@index([id_consultant], map: "idx_ct_id_consultant")
}

model consultant_program_images {
  id            String      @id @default(uuid()) @db.VarChar(36)
  id_consultant String      @db.VarChar(36)
  image_url     String      @db.VarChar(512)
  sort          Int         @default(0) @db.UnsignedInt
  created_at    DateTime    @default(now()) @db.Timestamp(0)
  updated_at    DateTime    @default(now()) @db.Timestamp(0)
  consultant    consultants @relation(fields: [id_consultant], references: [id], onDelete: Cascade, map: "fk_cpi_consultant")

  @@index([id_consultant], map: "idx_cpi_consultant")
  @@map("consultant_program_images")
}

model leads {
  id             String       @id @default(uuid()) @db.VarChar(36)
  full_name      String       @db.VarChar(150)
  domicile       String?      @db.VarChar(100)
  whatsapp       String?      @db.VarChar(30)
  email          String?
  education_last String?      @db.VarChar(50)
  assigned_to    String?      @db.VarChar(36)
  assigned_at    DateTime?    @db.Timestamp(0)
  created_at     DateTime     @default(now()) @db.Timestamp(0)
  updated_at     DateTime     @default(now()) @db.Timestamp(0)
  deleted_at     DateTime?    @db.Timestamp(0)
  referral_id    String?      @db.VarChar(36)
  consultants    consultants? @relation(fields: [assigned_to], references: [id], map: "fk_leads_assigned_to_consultants")
  referral       referral?    @relation("referral_to_leads", fields: [referral_id], references: [id], map: "fk_leads_referral")

  @@index([assigned_at], map: "idx_leads_assigned_at")
  @@index([assigned_to], map: "idx_leads_assigned_to")
  @@index([created_at], map: "idx_leads_created_at")
  @@index([deleted_at], map: "idx_leads_deleted_at")
  @@index([email], map: "idx_leads_email")
  @@index([whatsapp], map: "idx_leads_whatsapp")
  @@index([referral_id], map: "idx_leads_referral")
}

model referral {
  id                String              @id @default(uuid()) @db.VarChar(36)
  nik               String              @unique(map: "uq_referral_nik") @db.VarChar(16)
  full_name         String              @db.VarChar(150)
  date_of_birth     DateTime?           @db.DateTime(6)
  gender            gender
  address_line      String?
  rt                String?             @db.VarChar(3)
  rw                String?             @db.VarChar(3)
  kelurahan         String?             @db.VarChar(64)
  kecamatan         String?             @db.VarChar(64)
  city              String?             @db.VarChar(64)
  province          String?             @db.VarChar(64)

  /// ⬇️ FIELD BARU
  pekerjaan         String?             @db.VarChar(100)

  whatsapp          String              @db.VarChar(32)
  whatsapp_e164     String?             @db.VarChar(20)
  status            verification_status @default(PENDING)
  notes             String?             @db.VarChar(255)
  created_at        DateTime            @default(now()) @db.DateTime(6)
  updated_at        DateTime            @updatedAt @db.DateTime(6)
  deleted_at        DateTime?           @db.DateTime(6)
  email             String
  consent_agreed    Boolean             @default(false)
  domicile          String?             @db.VarChar(100)
  postal_code       String?             @db.VarChar(10)
  front_url         String              @db.VarChar(512)
  code              String?             @unique(map: "uq_referral_code") @db.VarChar(64)
  leads_count       Int                 @default(0) @db.UnsignedInt
  pic_consultant_id String?             @db.VarChar(36)
  leads             leads[]             @relation("referral_to_leads")
  pic_consultant    consultants?        @relation(fields: [pic_consultant_id], references: [id], map: "fk_referral_pic_consultant")

  @@index([status, created_at], map: "idx_referral_status_created_at")
  @@index([full_name], map: "idx_referral_full_name")
  @@index([city, province], map: "idx_referral_region")
  @@index([whatsapp], map: "idx_referral_whatsapp")
  @@index([whatsapp_e164], map: "idx_referral_whatsapp_e164")
  @@index([email], map: "idx_referral_email")
  @@index([created_at], map: "idx_referral_created_at")
  @@index([deleted_at], map: "idx_referral_deleted_at")
  @@index([pic_consultant_id], map: "fk_referral_pic_consultant")
}

model mitra_dalam_negeri {
  id                           String                         @id @default(uuid()) @db.Char(36)
  admin_user_id                String?                        @db.VarChar(36)
  address                      String                         @db.Text
  email                        String
  phone                        String                         @db.VarChar(64)
  created_at                   DateTime                       @default(now()) @db.DateTime(6)
  updated_at                   DateTime                       @updatedAt @db.DateTime(6)
  deleted_at                   DateTime?                      @db.DateTime(6)
  mou_url                      String?
  instagram                    String?
  twitter                      String?
  website                      String?
  image_url                    String?                        @db.VarChar(1024)
  city                         String?                        @db.VarChar(64)
  contact_name                 String?                        @db.VarChar(150)
  contact_position             String?                        @db.VarChar(100)
  contact_whatsapp             String?                        @db.VarChar(32)
  postal_code                  String?                        @db.VarChar(10)
  province                     String?                        @db.VarChar(64)
  review_notes                 String?                        @db.VarChar(512)
  reviewed_at                  DateTime?                      @db.DateTime(6)
  reviewed_by                  String?                        @db.VarChar(36)
  status                       mitra_review_status            @default(PENDING)
  category_id                  String?                        @db.VarChar(36)
  category                     mitra_dalam_negeri_categories? @relation(fields: [category_id], references: [id], onDelete: SetNull, map: "fk_mitra_category")
  admin_users                  admin_users?                   @relation(fields: [admin_user_id], references: [id], map: "fk_merchants_admin")
  reviewer                     admin_users?                   @relation("mitra_reviewer", fields: [reviewed_by], references: [id], map: "fk_merchants_reviewer")
  mitra_dalam_negeri_translate mitra_dalam_negeri_translate[]
  files                        mitra_files[]

  @@index([status], map: "idx_mitra_status")
  @@index([email], map: "idx_mitra_email")
  @@index([phone], map: "idx_mitra_phone")
  @@index([created_at], map: "idx_mitra_created_at")
  @@index([category_id], map: "idx_mitra_category")
  @@index([admin_user_id], map: "fk_merchants_admin")
  @@index([reviewed_by], map: "fk_merchants_reviewer")
  @@map("mitra_dalam_negeri")
}

model mitra_dalam_negeri_translate {
  id                 String             @id @default(uuid()) @db.Char(36)
  id_merchants       String             @db.Char(36)
  locale             String             @db.Char(5)
  name               String
  description        String?            @db.LongText
  created_at         DateTime?          @default(now()) @db.DateTime(6)
  updated_at         DateTime?          @default(now()) @db.DateTime(6)
  mitra_dalam_negeri mitra_dalam_negeri @relation(fields: [id_merchants], references: [id], onDelete: Cascade, map: "fk_merchants_translate_merchants")

  @@unique([id_merchants, locale], map: "uniq_merchants_locale")
  @@index([locale], map: "idx_mitra_tr_locale")
  @@map("mitra_dalam_negeri_translate")
}

model mitra_files {
  id         String             @id @default(uuid()) @db.Char(36)
  mitra_id   String             @db.Char(36)
  file_url   String             @db.VarChar(1024)
  sort       Int                @default(0) @db.UnsignedInt
  created_at DateTime           @default(now()) @db.DateTime(6)
  mitra      mitra_dalam_negeri @relation(fields: [mitra_id], references: [id], onDelete: Cascade, map: "fk_mitra_files_mitra")

  @@index([mitra_id], map: "idx_mitra_files_mitra")
  @@map("mitra_files")
}

/// -------- NEW: Kategori Mitra (tanpa description) --------
model mitra_dalam_negeri_categories {
  id         String    @id @default(uuid()) @db.VarChar(36)
  slug       String    @unique @db.VarChar(100)
  sort       Int       @default(0) @db.UnsignedInt
  created_at DateTime  @default(now()) @db.DateTime(6)
  updated_at DateTime  @updatedAt @db.DateTime(6)
  deleted_at DateTime? @db.DateTime(6)
  translate  mitra_dalam_negeri_categories_translate[]
  mitra      mitra_dalam_negeri[]

  @@index([deleted_at], map: "idx_mdncat_deleted")
  @@index([sort], map: "idx_mdncat_sort")
  @@map("mitra_dalam_negeri_categories")
}

model mitra_dalam_negeri_categories_translate {
  id          String    @id @default(uuid()) @db.VarChar(36)
  category_id String    @db.VarChar(36)
  locale      String    @db.Char(5)
  name        String
  created_at  DateTime? @default(now()) @db.DateTime(6)
  updated_at  DateTime? @default(now()) @db.DateTime(6)
  category    mitra_dalam_negeri_categories @relation(fields: [category_id], references: [id], onDelete: Cascade, map: "fk_mdncat_tr_category")

  @@unique([category_id, locale], map: "uniq_mdncat_locale")
  @@index([locale], map: "idx_mdncat_locale")
  @@map("mitra_dalam_negeri_categories_translate")
}

/// =========================
///    College & Requirements
///    =========================
model college {
  id                   String              @id @default(uuid()) @db.VarChar(36)
  admin_user_id        String              @db.VarChar(36)
  slug                 String              @unique(map: "uniq_partners_slug") @db.VarChar(255)
  logo_url             String?             @db.VarChar(1024)
  address              String?             @db.Text
  city                 String?             @db.VarChar(100)
  country              String              @db.VarChar(128)

  // === FINAL ===
  jenjang              String              @db.Text  // jadikan required jika kebijakan datamu wajib

  website              String              @db.VarChar(512)
  contact_name         String?
  no_telp              String?             @db.VarChar(32)
  email                String?
  created_at           DateTime            @default(now()) @db.DateTime(6)
  updated_at           DateTime            @db.DateTime(6)
  deleted_at           DateTime?           @db.DateTime(6)
  state                String?             @db.VarChar(100)
  postal_code          String?             @db.VarChar(20)
  tuition_min          Decimal?            @db.Decimal(12, 2)
  tuition_max          Decimal?            @db.Decimal(12, 2)
  living_cost_estimate Decimal?            @db.Decimal(12, 2)
  currency             String              @default("IDR") @db.VarChar(3)
  mou_url              String?             @db.VarChar(512)
  admin_users          admin_users         @relation(fields: [admin_user_id], references: [id], map: "fk_partners_admin")
  college_translate    college_translate[]
  jurusan              jurusan[]

  @@index([admin_user_id], map: "idx_partners_admin")
  @@index([contact_name], map: "idx_college_contact_name")
  @@index([email], map: "idx_college_email")
}

model college_translate {
  id          String    @id @default(uuid()) @db.VarChar(36)
  id_college  String    @db.VarChar(36)
  locale      String    @db.Char(5)
  name        String
  description String?   @db.LongText
  created_at  DateTime? @default(now()) @db.DateTime(6)
  updated_at  DateTime? @default(now()) @db.DateTime(6)
  college     college   @relation(fields: [id_college], references: [id], onDelete: Cascade, map: "fk_partners_translate_partners")

  @@unique([id_college, locale], map: "uniq_partners_locale")
  @@index([locale], map: "idx_locale")
}

model college_requirement_item {
  id         String                               @id @default(uuid()) @db.VarChar(36)
  college_id String                               @db.VarChar(36)
  prodi_id   String?                              @db.VarChar(36)
  sort       Int                                  @default(0) @db.UnsignedInt
  created_at DateTime                             @default(now()) @db.DateTime(6)
  updated_at DateTime                             @default(now()) @db.DateTime(6)
  translate  college_requirement_item_translate[] @relation("RequirementItemToTranslate")

  @@index([college_id], map: "idx_cri_college")
  @@index([prodi_id], map: "idx_cri_prodi")
  @@index([sort], map: "idx_cri_sort")
  @@map("college_requirement_items")
}

model college_requirement_item_translate {
  id         String                   @id @default(uuid()) @db.VarChar(36)
  item_id    String                   @db.VarChar(36)
  locale     String                   @db.Char(5)
  text       String                   @db.Text
  created_at DateTime?                @default(now()) @db.DateTime(6)
  updated_at DateTime?                @default(now()) @db.DateTime(6)
  item       college_requirement_item @relation("RequirementItemToTranslate", fields: [item_id], references: [id], onDelete: Cascade, map: "fk_cri_translate_item")

  @@unique([item_id, locale], map: "uniq_cri_item_locale")
  @@index([locale], map: "idx_cri_locale")
  @@map("college_requirement_item_translate")
}

/// =========================
///    Services
///    =========================
model service_categories {
  id         String     @id @default(uuid()) @db.VarChar(36)
  slug       String     @unique @db.VarChar(100)
  created_at DateTime   @default(now()) @db.DateTime(6)
  updated_at DateTime   @updatedAt @db.DateTime(6)
  name       String     @db.VarChar(150)
  services   services[]

  @@map("service_categories")
}

model services {
  id                 String                @id @default(uuid()) @db.VarChar(36)
  admin_user_id      String                @db.VarChar(36)
  image_url          String?               @db.VarChar(512)
  service_type       services_program_type
  category_id        String?               @db.VarChar(36)
  price              Int?
  phone              String?               @db.VarChar(64)
  is_published       Boolean               @default(false)
  created_at         DateTime              @default(now()) @db.DateTime(6)
  updated_at         DateTime              @updatedAt @db.DateTime(6)
  deleted_at         DateTime?             @db.DateTime(6)
  admin_users        admin_users           @relation(fields: [admin_user_id], references: [id])
  category           service_categories?   @relation(fields: [category_id], references: [id])
  services_translate services_translate[]

  @@index([admin_user_id], map: "idx_services_admin")
  @@index([category_id], map: "idx_services_category")
  @@index([service_type], map: "idx_services_type")
  @@map("services")
}

model services_translate {
  id          String   @id @default(uuid()) @db.VarChar(36)
  id_services String   @db.VarChar(36)
  locale      String   @db.Char(5)
  name        String
  description String?  @db.LongText
  created_at  DateTime @default(now()) @db.DateTime(6)
  updated_at  DateTime @default(now()) @db.DateTime(6)
  services    services @relation(fields: [id_services], references: [id], onDelete: Cascade)

  @@unique([id_services, locale], map: "uq_services_translate")
  @@index([locale], map: "idx_services_translate_locale")
  @@index([id_services], map: "idx_services_translate_service")
  @@map("services_translate")
}

/// =========================
///    NEW: Aktivitas (i18n)
///    =========================
model aktivitas {
  id            String                @id @default(uuid()) @db.VarChar(36)
  admin_user_id String                @db.VarChar(36)
  image_url     String?               @db.VarChar(512)
  sort          Int                   @default(0) @db.UnsignedInt
  is_published  Boolean               @default(false)
  created_at    DateTime              @default(now()) @db.DateTime(6)
  updated_at    DateTime              @updatedAt @db.DateTime(6)
  deleted_at    DateTime?             @db.DateTime(6)
  admin_users   admin_users           @relation(fields: [admin_user_id], references: [id], map: "fk_aktivitas_admin")
  translate     aktivitas_translate[]

  @@index([admin_user_id], map: "idx_aktivitas_admin")
  @@index([is_published, created_at], map: "idx_aktivitas_published_created")
  @@index([sort], map: "idx_aktivitas_sort")
  @@index([deleted_at], map: "idx_aktivitas_deleted")
  @@map("aktivitas")
}

model aktivitas_translate {
  id           String    @id @default(uuid()) @db.VarChar(36)
  id_aktivitas String    @db.VarChar(36)
  locale       String    @db.Char(5)
  name         String
  description  String?   @db.LongText
  created_at   DateTime? @default(now()) @db.DateTime(6)
  updated_at   DateTime? @default(now()) @db.DateTime(6)
  aktivitas    aktivitas @relation(fields: [id_aktivitas], references: [id], onDelete: Cascade, map: "fk_aktivitas_tr_aktivitas")

  @@unique([id_aktivitas, locale], map: "uniq_aktivitas_locale")
  @@index([locale], map: "idx_aktivitas_locale")
  @@map("aktivitas_translate")
}

/// =========================
///    NEW: Booth Booking & Payments
///    =========================
enum booth_booking_status {
  PENDING
  PAID
  EXPIRED
  CANCELLED
  FAILED
  REVIEW
}

/// =========================
///    Mitra Dalam Negeri (REVISED)
///    =========================
enum mitra_review_status {
  PENDING
  APPROVED
  DECLINED
}

/// =========================
///    Enums
///    =========================
enum events_pricing_type {
  FREE
  PAID
}

enum tickets_status {
  PENDING
  CONFIRMED
  CANCELLED
}

enum tickets_checkin_status {
  NOT_CHECKED_IN
  CHECKED_IN
}

enum gender {
  MALE
  FEMALE
}

enum verification_status {
  PENDING
  REJECTED
  VERIFIED
}

enum services_program_type {
  B2B
  B2C
}

enum voucher_type {
  FIXED
  PERCENT
}
